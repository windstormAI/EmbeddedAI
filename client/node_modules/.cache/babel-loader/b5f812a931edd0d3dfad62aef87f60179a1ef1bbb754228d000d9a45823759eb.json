{"ast":null,"code":"import _objectSpread from\"/workspace/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\n * Circuit Designer Component\n * Advanced 2D circuit design interface with enhanced features\n */import React,{useState,useRef,useCallback,useEffect}from'react';import{Zap,Cpu,Lightbulb,Volume2,Thermometer,Eye,RotateCcw,ZoomIn,ZoomOut,Move,Square,Circle,Minus,Save,Download,Upload,Undo,Redo,Grid,Layers,Settings,Play,Pause,RotateCw,Copy,Trash2,Link,Unlink,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CircuitDesigner=_ref=>{var _project$circuitData,_project$circuitData2;let{project,onCircuitChange,onCodeGenerate}=_ref;const canvasRef=useRef(null);const[zoom,setZoom]=useState(1);const[panOffset,setPanOffset]=useState({x:0,y:0});const[selectedTool,setSelectedTool]=useState('select');const[draggedComponent,setDraggedComponent]=useState(null);const[isDragging,setIsDragging]=useState(false);const[isConnecting,setIsConnecting]=useState(false);const[connectionStart,setConnectionStart]=useState(null);const[showGrid,setShowGrid]=useState(true);const[snapToGrid,setSnapToGrid]=useState(true);const[selectedComponents,setSelectedComponents]=useState([]);const[clipboard,setClipboard]=useState([]);const[history,setHistory]=useState([]);const[historyIndex,setHistoryIndex]=useState(-1);// Circuit state\nconst[components,setComponents]=useState((project===null||project===void 0?void 0:(_project$circuitData=project.circuitData)===null||_project$circuitData===void 0?void 0:_project$circuitData.components)||[]);const[connections,setConnections]=useState((project===null||project===void 0?void 0:(_project$circuitData2=project.circuitData)===null||_project$circuitData2===void 0?void 0:_project$circuitData2.connections)||[]);const[selectedComponent,setSelectedComponent]=useState(null);// Grid and snapping\nconst GRID_SIZE=20;const SNAP_THRESHOLD=10;// Snap to grid function\nconst snapToGridFunction=useCallback((x,y)=>{if(!snapToGrid)return{x,y};return{x:Math.round(x/GRID_SIZE)*GRID_SIZE,y:Math.round(y/GRID_SIZE)*GRID_SIZE};},[snapToGrid]);// Save state to history\nconst saveToHistory=useCallback((newComponents,newConnections)=>{const state={components:newComponents,connections:newConnections};const newHistory=history.slice(0,historyIndex+1);newHistory.push(state);setHistory(newHistory);setHistoryIndex(newHistory.length-1);},[history,historyIndex]);// Undo/Redo functions\nconst undo=useCallback(()=>{if(historyIndex>0){const prevState=history[historyIndex-1];setComponents(prevState.components);setConnections(prevState.connections);setHistoryIndex(historyIndex-1);onCircuitChange(prevState);}},[history,historyIndex,onCircuitChange]);const redo=useCallback(()=>{if(historyIndex<history.length-1){const nextState=history[historyIndex+1];setComponents(nextState.components);setConnections(nextState.connections);setHistoryIndex(historyIndex+1);onCircuitChange(nextState);}},[history,historyIndex,onCircuitChange]);// Initialize history\nuseEffect(()=>{if(components.length>0||connections.length>0){saveToHistory(components,connections);}},[]);// Only on mount\n// Available components with enhanced properties\nconst componentLibrary=[{id:'arduino-uno',name:'Arduino Uno',icon:Cpu,category:'board',pins:14,color:'#00979C',size:{width:120,height:80}},{id:'esp32',name:'ESP32',icon:Cpu,category:'board',pins:38,color:'#E7352C',size:{width:100,height:60}},{id:'led',name:'LED',icon:Lightbulb,category:'output',pins:2,color:'#FFD700',size:{width:40,height:40}},{id:'push-button',name:'Push Button',icon:Square,category:'input',pins:2,color:'#4A90E2',size:{width:50,height:50}},{id:'potentiometer',name:'Potentiometer',icon:Circle,category:'input',pins:3,color:'#7ED321',size:{width:60,height:40}},{id:'buzzer',name:'Buzzer',icon:Volume2,category:'output',pins:2,color:'#F5A623',size:{width:45,height:45}},{id:'temperature-sensor',name:'Temp Sensor',icon:Thermometer,category:'input',pins:3,color:'#D0021B',size:{width:55,height:35}},{id:'photoresistor',name:'Photoresistor',icon:Eye,category:'input',pins:2,color:'#BD10E0',size:{width:50,height:30}}];// Handle component drag start\nconst handleDragStart=(e,component)=>{setDraggedComponent(component);e.dataTransfer.effectAllowed='copy';};// Handle drop on canvas\nconst handleDrop=useCallback(e=>{e.preventDefault();if(!draggedComponent)return;const rect=canvasRef.current.getBoundingClientRect();const x=(e.clientX-rect.left-panOffset.x)/zoom;const y=(e.clientY-rect.top-panOffset.y)/zoom;const snapped=snapToGridFunction(x,y);const newComponent={id:\"\".concat(draggedComponent.id,\"_\").concat(Date.now()),type:draggedComponent.id,name:draggedComponent.name,x:snapped.x,y:snapped.y,rotation:0,properties:{},color:draggedComponent.color,size:draggedComponent.size,pins:draggedComponent.pins};const updatedComponents=[...components,newComponent];setComponents(updatedComponents);saveToHistory(updatedComponents,connections);// Notify parent of changes\nonCircuitChange({components:updatedComponents,connections});setDraggedComponent(null);},[draggedComponent,components,connections,panOffset,zoom,snapToGrid,saveToHistory,onCircuitChange]);// Handle component selection\nconst handleComponentClick=(componentId,e)=>{e.stopPropagation();if(selectedTool==='select'){if(e.ctrlKey||e.metaKey){// Multi-select\nsetSelectedComponents(prev=>prev.includes(componentId)?prev.filter(id=>id!==componentId):[...prev,componentId]);}else{// Single select\nsetSelectedComponents([componentId]);setSelectedComponent(componentId);}}else if(selectedTool==='connect'){handleConnectionClick(componentId);}};// Handle connections\nconst handleConnectionClick=componentId=>{if(!isConnecting){setIsConnecting(true);setConnectionStart(componentId);}else{if(connectionStart!==componentId){createConnection(connectionStart,componentId);}setIsConnecting(false);setConnectionStart(null);}};const createConnection=(fromId,toId)=>{const newConnection={id:\"conn_\".concat(Date.now()),from:{componentId:fromId,pin:'out'},to:{componentId:toId,pin:'in'},type:'wire',color:'#000000'};const updatedConnections=[...connections,newConnection];setConnections(updatedConnections);saveToHistory(components,updatedConnections);onCircuitChange({components,connections:updatedConnections});};// Handle canvas pan\nconst handleMouseDown=e=>{if(selectedTool==='pan'||e.altKey){setIsDragging(true);}};const handleMouseMove=e=>{if(isDragging&&(selectedTool==='pan'||e.altKey)){setPanOffset(prev=>({x:prev.x+e.movementX,y:prev.y+e.movementY}));}};const handleMouseUp=()=>{setIsDragging(false);};// Zoom controls\nconst handleZoomIn=()=>setZoom(prev=>Math.min(prev*1.2,3));const handleZoomOut=()=>setZoom(prev=>Math.max(prev*0.8,0.3));const handleResetView=()=>{setZoom(1);setPanOffset({x:0,y:0});};// Component management\nconst handleDeleteComponent=()=>{const updatedComponents=components.filter(comp=>!selectedComponents.includes(comp.id));const updatedConnections=connections.filter(conn=>!selectedComponents.includes(conn.from.componentId)&&!selectedComponents.includes(conn.to.componentId));setComponents(updatedComponents);setConnections(updatedConnections);setSelectedComponents([]);setSelectedComponent(null);saveToHistory(updatedComponents,updatedConnections);onCircuitChange({components:updatedComponents,connections:updatedConnections});};const handleCopyComponents=()=>{const componentsToCopy=components.filter(comp=>selectedComponents.includes(comp.id));setClipboard(componentsToCopy);};const handlePasteComponents=()=>{if(clipboard.length===0)return;const pastedComponents=clipboard.map(comp=>_objectSpread(_objectSpread({},comp),{},{id:\"\".concat(comp.id,\"_copy_\").concat(Date.now()),x:comp.x+50,y:comp.y+50}));const updatedComponents=[...components,...pastedComponents];setComponents(updatedComponents);saveToHistory(updatedComponents,connections);onCircuitChange({components:updatedComponents,connections});};// Generate code from circuit\nconst handleGenerateCode=()=>{if(onCodeGenerate&&components.length>0){const circuitDescription=generateCircuitDescription();onCodeGenerate(circuitDescription);}};const generateCircuitDescription=()=>{const board=components.find(comp=>comp.type.includes('arduino')||comp.type.includes('esp'));const sensors=components.filter(comp=>comp.type.includes('sensor'));const actuators=components.filter(comp=>comp.type.includes('led')||comp.type.includes('buzzer'));let description=\"Create Arduino code for a circuit with:\";if(board){description+=\"\\n- \".concat(board.name,\" as the microcontroller\");}if(sensors.length>0){description+=\"\\n- Sensors: \".concat(sensors.map(s=>s.name).join(', '));}if(actuators.length>0){description+=\"\\n- Actuators: \".concat(actuators.map(a=>a.name).join(', '));}if(connections.length>0){description+=\"\\n- \".concat(connections.length,\" connections between components\");}description+=\"\\n\\nPlease generate complete Arduino code with proper setup, loop, and pin configurations.\";return description;};// Export circuit as JSON\nconst handleExportCircuit=()=>{const circuitData={components,connections,metadata:{exportedAt:new Date().toISOString(),version:'1.0',projectName:(project===null||project===void 0?void 0:project.name)||'Untitled Circuit'}};const blob=new Blob([JSON.stringify(circuitData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat((project===null||project===void 0?void 0:project.name)||'circuit',\".json\");document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);};// Import circuit from JSON\nconst handleImportCircuit=event=>{const file=event.target.files[0];if(file){const reader=new FileReader();reader.onload=e=>{try{const circuitData=JSON.parse(e.target.result);if(circuitData.components&&circuitData.connections){setComponents(circuitData.components);setConnections(circuitData.connections);saveToHistory(circuitData.components,circuitData.connections);onCircuitChange({components:circuitData.components,connections:circuitData.connections});}}catch(error){console.error('Failed to import circuit:',error);}};reader.readAsText(file);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex flex-col bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Circuit Designer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedTool('select'),className:\"p-2 rounded \".concat(selectedTool==='select'?'bg-blue-100 text-blue-600':'hover:bg-gray-100'),title:\"Select Tool\",children:/*#__PURE__*/_jsx(Move,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedTool('pan'),className:\"p-2 rounded \".concat(selectedTool==='pan'?'bg-blue-100 text-blue-600':'hover:bg-gray-100'),title:\"Pan Tool\",children:/*#__PURE__*/_jsx(Move,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedTool('connect'),className:\"p-2 rounded \".concat(selectedTool==='connect'?'bg-blue-100 text-blue-600':'hover:bg-gray-100'),title:\"Connect Tool\",children:/*#__PURE__*/_jsx(Link,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowGrid(!showGrid),className:\"p-2 rounded \".concat(showGrid?'bg-blue-100 text-blue-600':'hover:bg-gray-100'),title:\"Toggle Grid\",children:/*#__PURE__*/_jsx(Grid,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSnapToGrid(!snapToGrid),className:\"p-2 rounded \".concat(snapToGrid?'bg-blue-100 text-blue-600':'hover:bg-gray-100'),title:\"Toggle Snap to Grid\",children:/*#__PURE__*/_jsx(Settings,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleZoomOut,className:\"p-2 hover:bg-gray-100 rounded\",title:\"Zoom Out\",children:/*#__PURE__*/_jsx(ZoomOut,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600 min-w-[60px] text-center\",children:[Math.round(zoom*100),\"%\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleZoomIn,className:\"p-2 hover:bg-gray-100 rounded\",title:\"Zoom In\",children:/*#__PURE__*/_jsx(ZoomIn,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleResetView,className:\"p-2 hover:bg-gray-100 rounded\",title:\"Reset View\",children:/*#__PURE__*/_jsx(RotateCcw,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:undo,disabled:historyIndex<=0,className:\"p-2 hover:bg-gray-100 rounded disabled:opacity-50\",title:\"Undo\",children:/*#__PURE__*/_jsx(Undo,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:redo,disabled:historyIndex>=history.length-1,className:\"p-2 hover:bg-gray-100 rounded disabled:opacity-50\",title:\"Redo\",children:/*#__PURE__*/_jsx(Redo,{className:\"h-4 w-4\"})}),selectedComponents.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleCopyComponents,className:\"p-2 hover:bg-gray-100 rounded\",title:\"Copy\",children:/*#__PURE__*/_jsx(Copy,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteComponent,className:\"p-2 hover:bg-red-100 text-red-600 rounded\",title:\"Delete\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePasteComponents,disabled:clipboard.length===0,className:\"p-2 hover:bg-gray-100 rounded disabled:opacity-50\",title:\"Paste\",children:/*#__PURE__*/_jsx(Square,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleGenerateCode,disabled:components.length===0,className:\"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:opacity-50\",title:\"Generate Code\",children:[/*#__PURE__*/_jsx(Zap,{className:\"h-4 w-4 inline mr-1\"}),\"Generate Code\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleExportCircuit,className:\"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded\",title:\"Export Circuit\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4 inline mr-1\"}),\"Export\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded cursor-pointer\",children:[/*#__PURE__*/_jsx(Upload,{className:\"h-4 w-4 inline mr-1\"}),\"Import\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:handleImportCircuit,className:\"hidden\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-64 border-r border-gray-200 bg-gray-50 p-4 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-900 mb-4\",children:\"Component Library\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:['board','input','output'].map(category=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-xs font-medium text-gray-700 uppercase tracking-wide mb-2\",children:category}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:componentLibrary.filter(comp=>comp.category===category).map(component=>{const Icon=component.icon;return/*#__PURE__*/_jsxs(\"div\",{draggable:true,onDragStart:e=>handleDragStart(e,component),className:\"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-sm cursor-move transition-all\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded\",style:{backgroundColor:component.color+'20'},children:/*#__PURE__*/_jsx(Icon,{className:\"h-5 w-5\",style:{color:component.color}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:component.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[component.pins,\" pins\"]})]})]},component.id);})})]},category))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 bg-gray-100 overflow-hidden relative\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:canvasRef,className:\"w-full h-full cursor-crosshair\",style:{backgroundImage:showGrid?\"\\n                radial-gradient(circle, #e5e7eb 1px, transparent 1px),\\n                linear-gradient(to right, #f3f4f6 1px, transparent 1px),\\n                linear-gradient(to bottom, #f3f4f6 1px, transparent 1px)\\n              \":'none',backgroundSize:showGrid?\"\".concat(GRID_SIZE*zoom,\"px \").concat(GRID_SIZE*zoom,\"px\"):'auto',backgroundPosition:\"\".concat(panOffset.x,\"px \").concat(panOffset.y,\"px\")},onDrop:handleDrop,onDragOver:e=>e.preventDefault(),onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onClick:()=>{setSelectedComponents([]);setSelectedComponent(null);},children:[connections.map(connection=>{var _fromComp$size,_fromComp$size2,_toComp$size,_toComp$size2;const fromComp=components.find(c=>c.id===connection.from.componentId);const toComp=components.find(c=>c.id===connection.to.componentId);if(!fromComp||!toComp)return null;const fromX=fromComp.x+(((_fromComp$size=fromComp.size)===null||_fromComp$size===void 0?void 0:_fromComp$size.width)||60)/2;const fromY=fromComp.y+(((_fromComp$size2=fromComp.size)===null||_fromComp$size2===void 0?void 0:_fromComp$size2.height)||40)/2;const toX=toComp.x+(((_toComp$size=toComp.size)===null||_toComp$size===void 0?void 0:_toComp$size.width)||60)/2;const toY=toComp.y+(((_toComp$size2=toComp.size)===null||_toComp$size2===void 0?void 0:_toComp$size2.height)||40)/2;return/*#__PURE__*/_jsxs(\"svg\",{className:\"absolute inset-0 pointer-events-none\",style:{zIndex:1},children:[/*#__PURE__*/_jsx(\"line\",{x1:(fromX+panOffset.x)*zoom,y1:(fromY+panOffset.y)*zoom,x2:(toX+panOffset.x)*zoom,y2:(toY+panOffset.y)*zoom,stroke:connection.color,strokeWidth:\"2\",markerEnd:\"url(#arrowhead)\"}),/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsx(\"marker\",{id:\"arrowhead\",markerWidth:\"10\",markerHeight:\"7\",refX:\"9\",refY:\"3.5\",orient:\"auto\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"0 0, 10 3.5, 0 7\",fill:connection.color})})})]},connection.id);}),components.map(component=>{var _component$size,_component$size2;const libraryComponent=componentLibrary.find(c=>c.id===component.type);if(!libraryComponent)return null;const Icon=libraryComponent.icon;const isSelected=selectedComponents.includes(component.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute cursor-move border-2 rounded-lg p-3 bg-white shadow-sm transition-all \".concat(isSelected?'border-blue-500 bg-blue-50 shadow-lg scale-105':'border-gray-300 hover:border-gray-400 hover:shadow-md'),style:{left:component.x*zoom+panOffset.x,top:component.y*zoom+panOffset.y,transform:\"scale(\".concat(zoom,\")\"),transformOrigin:'top left',minWidth:((_component$size=component.size)===null||_component$size===void 0?void 0:_component$size.width)||60,minHeight:((_component$size2=component.size)===null||_component$size2===void 0?void 0:_component$size2.height)||40},onClick:e=>handleComponentClick(component.id,e),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-1 rounded\",style:{backgroundColor:component.color+'20'},children:/*#__PURE__*/_jsx(Icon,{className:\"h-4 w-4\",style:{color:component.color}})}),isSelected&&/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1\",children:/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();// Rotate component\nconst updatedComponents=components.map(comp=>comp.id===component.id?_objectSpread(_objectSpread({},comp),{},{rotation:(comp.rotation+90)%360}):comp);setComponents(updatedComponents);saveToHistory(updatedComponents,connections);},className:\"p-1 hover:bg-gray-200 rounded\",children:/*#__PURE__*/_jsx(RotateCw,{className:\"h-3 w-3\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-center text-gray-700 font-medium truncate\",children:component.name}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -left-1 top-1/2 transform -translate-y-1/2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full border-2 cursor-pointer transition-colors \".concat(isConnecting&&connectionStart===component.id?'bg-blue-500 border-blue-600':'bg-white border-gray-400 hover:border-blue-400'),onClick:e=>{e.stopPropagation();handleConnectionClick(component.id);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -right-1 top-1/2 transform -translate-y-1/2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full border-2 cursor-pointer transition-colors \".concat(isConnecting&&connectionStart===component.id?'bg-blue-500 border-blue-600':'bg-white border-gray-400 hover:border-blue-400'),onClick:e=>{e.stopPropagation();handleConnectionClick(component.id);}})})]},component.id);})]}),components.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Zap,{className:\"mx-auto h-16 w-16 text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Start Designing Your Circuit\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Drag components from the sidebar to begin building your circuit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Tip: Use the pan tool to navigate and zoom controls to adjust view\"})]})}),isConnecting&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Link,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Click on another component to create connection\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setIsConnecting(false);setConnectionStart(null);},className:\"ml-2 hover:bg-blue-700 p-1 rounded\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 border-l border-gray-200 bg-gray-50 p-4 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-gray-900 mb-4\",children:\"Properties\"}),selectedComponent?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:(()=>{const component=components.find(c=>c.id===selectedComponent);if(!component)return null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:component.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Position X\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:Math.round(component.x),onChange:e=>{const updatedComponents=components.map(comp=>comp.id===component.id?_objectSpread(_objectSpread({},comp),{},{x:parseInt(e.target.value)||0}):comp);setComponents(updatedComponents);saveToHistory(updatedComponents,connections);},className:\"w-full px-2 py-1 text-sm border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Position Y\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:Math.round(component.y),onChange:e=>{const updatedComponents=components.map(comp=>comp.id===component.id?_objectSpread(_objectSpread({},comp),{},{y:parseInt(e.target.value)||0}):comp);setComponents(updatedComponents);saveToHistory(updatedComponents,connections);},className:\"w-full px-2 py-1 text-sm border border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-medium text-gray-700 mb-1\",children:\"Rotation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:component.rotation||0,onChange:e=>{const updatedComponents=components.map(comp=>comp.id===component.id?_objectSpread(_objectSpread({},comp),{},{rotation:parseInt(e.target.value)||0}):comp);setComponents(updatedComponents);saveToHistory(updatedComponents,connections);},className:\"w-full px-2 py-1 text-sm border border-gray-300 rounded\"})]})]})]});})()}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500\",children:[/*#__PURE__*/_jsx(Square,{className:\"mx-auto h-8 w-8 mb-2 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Select a component to view its properties\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Circuit Stats\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Components:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:components.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Connections:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:connections.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Zoom:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[Math.round(zoom*100),\"%\"]})]})]})]})]})]})]});};export default CircuitDesigner;","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","Zap","Cpu","Lightbulb","Volume2","Thermometer","Eye","RotateCcw","ZoomIn","ZoomOut","Move","Square","Circle","Minus","Save","Download","Upload","Undo","Redo","Grid","Layers","Settings","Play","Pause","RotateCw","Copy","Trash2","Link","Unlink","X","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CircuitDesigner","_ref","_project$circuitData","_project$circuitData2","project","onCircuitChange","onCodeGenerate","canvasRef","zoom","setZoom","panOffset","setPanOffset","x","y","selectedTool","setSelectedTool","draggedComponent","setDraggedComponent","isDragging","setIsDragging","isConnecting","setIsConnecting","connectionStart","setConnectionStart","showGrid","setShowGrid","snapToGrid","setSnapToGrid","selectedComponents","setSelectedComponents","clipboard","setClipboard","history","setHistory","historyIndex","setHistoryIndex","components","setComponents","circuitData","connections","setConnections","selectedComponent","setSelectedComponent","GRID_SIZE","SNAP_THRESHOLD","snapToGridFunction","Math","round","saveToHistory","newComponents","newConnections","state","newHistory","slice","push","length","undo","prevState","redo","nextState","componentLibrary","id","name","icon","category","pins","color","size","width","height","handleDragStart","e","component","dataTransfer","effectAllowed","handleDrop","preventDefault","rect","current","getBoundingClientRect","clientX","left","clientY","top","snapped","newComponent","concat","Date","now","type","rotation","properties","updatedComponents","handleComponentClick","componentId","stopPropagation","ctrlKey","metaKey","prev","includes","filter","handleConnectionClick","createConnection","fromId","toId","newConnection","from","pin","to","updatedConnections","handleMouseDown","altKey","handleMouseMove","movementX","movementY","handleMouseUp","handleZoomIn","min","handleZoomOut","max","handleResetView","handleDeleteComponent","comp","conn","handleCopyComponents","componentsToCopy","handlePasteComponents","pastedComponents","map","_objectSpread","handleGenerateCode","circuitDescription","generateCircuitDescription","board","find","sensors","actuators","description","s","join","a","handleExportCircuit","metadata","exportedAt","toISOString","version","projectName","blob","Blob","JSON","stringify","url","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleImportCircuit","event","file","target","files","reader","FileReader","onload","parse","result","error","console","readAsText","className","children","onClick","title","disabled","accept","onChange","Icon","draggable","onDragStart","style","backgroundColor","ref","backgroundImage","backgroundSize","backgroundPosition","onDrop","onDragOver","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","connection","_fromComp$size","_fromComp$size2","_toComp$size","_toComp$size2","fromComp","c","toComp","fromX","fromY","toX","toY","zIndex","x1","y1","x2","y2","stroke","strokeWidth","markerEnd","markerWidth","markerHeight","refX","refY","orient","points","fill","_component$size","_component$size2","libraryComponent","isSelected","transform","transformOrigin","minWidth","minHeight","value","parseInt"],"sources":["/workspace/client/src/components/circuit/CircuitDesigner.js"],"sourcesContent":["/**\n * Circuit Designer Component\n * Advanced 2D circuit design interface with enhanced features\n */\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport {\n  Zap,\n  Cpu,\n  Lightbulb,\n  Volume2,\n  Thermometer,\n  Eye,\n  RotateCcw,\n  ZoomIn,\n  ZoomOut,\n  Move,\n  Square,\n  Circle,\n  Minus,\n  Save,\n  Download,\n  Upload,\n  Undo,\n  Redo,\n  Grid,\n  Layers,\n  Settings,\n  Play,\n  Pause,\n  RotateCw,\n  Copy,\n  Trash2,\n  Link,\n  Unlink,\n  X\n} from 'lucide-react';\n\nconst CircuitDesigner = ({ project, onCircuitChange, onCodeGenerate }) => {\n  const canvasRef = useRef(null);\n  const [zoom, setZoom] = useState(1);\n  const [panOffset, setPanOffset] = useState({ x: 0, y: 0 });\n  const [selectedTool, setSelectedTool] = useState('select');\n  const [draggedComponent, setDraggedComponent] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectionStart, setConnectionStart] = useState(null);\n  const [showGrid, setShowGrid] = useState(true);\n  const [snapToGrid, setSnapToGrid] = useState(true);\n  const [selectedComponents, setSelectedComponents] = useState([]);\n  const [clipboard, setClipboard] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Circuit state\n  const [components, setComponents] = useState(project?.circuitData?.components || []);\n  const [connections, setConnections] = useState(project?.circuitData?.connections || []);\n  const [selectedComponent, setSelectedComponent] = useState(null);\n\n  // Grid and snapping\n  const GRID_SIZE = 20;\n  const SNAP_THRESHOLD = 10;\n\n  // Snap to grid function\n  const snapToGridFunction = useCallback((x, y) => {\n    if (!snapToGrid) return { x, y };\n    return {\n      x: Math.round(x / GRID_SIZE) * GRID_SIZE,\n      y: Math.round(y / GRID_SIZE) * GRID_SIZE\n    };\n  }, [snapToGrid]);\n\n  // Save state to history\n  const saveToHistory = useCallback((newComponents, newConnections) => {\n    const state = { components: newComponents, connections: newConnections };\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push(state);\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  }, [history, historyIndex]);\n\n  // Undo/Redo functions\n  const undo = useCallback(() => {\n    if (historyIndex > 0) {\n      const prevState = history[historyIndex - 1];\n      setComponents(prevState.components);\n      setConnections(prevState.connections);\n      setHistoryIndex(historyIndex - 1);\n      onCircuitChange(prevState);\n    }\n  }, [history, historyIndex, onCircuitChange]);\n\n  const redo = useCallback(() => {\n    if (historyIndex < history.length - 1) {\n      const nextState = history[historyIndex + 1];\n      setComponents(nextState.components);\n      setConnections(nextState.connections);\n      setHistoryIndex(historyIndex + 1);\n      onCircuitChange(nextState);\n    }\n  }, [history, historyIndex, onCircuitChange]);\n\n  // Initialize history\n  useEffect(() => {\n    if (components.length > 0 || connections.length > 0) {\n      saveToHistory(components, connections);\n    }\n  }, []); // Only on mount\n\n  // Available components with enhanced properties\n  const componentLibrary = [\n    {\n      id: 'arduino-uno',\n      name: 'Arduino Uno',\n      icon: Cpu,\n      category: 'board',\n      pins: 14,\n      color: '#00979C',\n      size: { width: 120, height: 80 }\n    },\n    {\n      id: 'esp32',\n      name: 'ESP32',\n      icon: Cpu,\n      category: 'board',\n      pins: 38,\n      color: '#E7352C',\n      size: { width: 100, height: 60 }\n    },\n    {\n      id: 'led',\n      name: 'LED',\n      icon: Lightbulb,\n      category: 'output',\n      pins: 2,\n      color: '#FFD700',\n      size: { width: 40, height: 40 }\n    },\n    {\n      id: 'push-button',\n      name: 'Push Button',\n      icon: Square,\n      category: 'input',\n      pins: 2,\n      color: '#4A90E2',\n      size: { width: 50, height: 50 }\n    },\n    {\n      id: 'potentiometer',\n      name: 'Potentiometer',\n      icon: Circle,\n      category: 'input',\n      pins: 3,\n      color: '#7ED321',\n      size: { width: 60, height: 40 }\n    },\n    {\n      id: 'buzzer',\n      name: 'Buzzer',\n      icon: Volume2,\n      category: 'output',\n      pins: 2,\n      color: '#F5A623',\n      size: { width: 45, height: 45 }\n    },\n    {\n      id: 'temperature-sensor',\n      name: 'Temp Sensor',\n      icon: Thermometer,\n      category: 'input',\n      pins: 3,\n      color: '#D0021B',\n      size: { width: 55, height: 35 }\n    },\n    {\n      id: 'photoresistor',\n      name: 'Photoresistor',\n      icon: Eye,\n      category: 'input',\n      pins: 2,\n      color: '#BD10E0',\n      size: { width: 50, height: 30 }\n    }\n  ];\n\n  // Handle component drag start\n  const handleDragStart = (e, component) => {\n    setDraggedComponent(component);\n    e.dataTransfer.effectAllowed = 'copy';\n  };\n\n  // Handle drop on canvas\n  const handleDrop = useCallback((e) => {\n    e.preventDefault();\n\n    if (!draggedComponent) return;\n\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = (e.clientX - rect.left - panOffset.x) / zoom;\n    const y = (e.clientY - rect.top - panOffset.y) / zoom;\n\n    const snapped = snapToGridFunction(x, y);\n\n    const newComponent = {\n      id: `${draggedComponent.id}_${Date.now()}`,\n      type: draggedComponent.id,\n      name: draggedComponent.name,\n      x: snapped.x,\n      y: snapped.y,\n      rotation: 0,\n      properties: {},\n      color: draggedComponent.color,\n      size: draggedComponent.size,\n      pins: draggedComponent.pins\n    };\n\n    const updatedComponents = [...components, newComponent];\n    setComponents(updatedComponents);\n    saveToHistory(updatedComponents, connections);\n\n    // Notify parent of changes\n    onCircuitChange({\n      components: updatedComponents,\n      connections\n    });\n\n    setDraggedComponent(null);\n  }, [draggedComponent, components, connections, panOffset, zoom, snapToGrid, saveToHistory, onCircuitChange]);\n\n  // Handle component selection\n  const handleComponentClick = (componentId, e) => {\n    e.stopPropagation();\n\n    if (selectedTool === 'select') {\n      if (e.ctrlKey || e.metaKey) {\n        // Multi-select\n        setSelectedComponents(prev =>\n          prev.includes(componentId)\n            ? prev.filter(id => id !== componentId)\n            : [...prev, componentId]\n        );\n      } else {\n        // Single select\n        setSelectedComponents([componentId]);\n        setSelectedComponent(componentId);\n      }\n    } else if (selectedTool === 'connect') {\n      handleConnectionClick(componentId);\n    }\n  };\n\n  // Handle connections\n  const handleConnectionClick = (componentId) => {\n    if (!isConnecting) {\n      setIsConnecting(true);\n      setConnectionStart(componentId);\n    } else {\n      if (connectionStart !== componentId) {\n        createConnection(connectionStart, componentId);\n      }\n      setIsConnecting(false);\n      setConnectionStart(null);\n    }\n  };\n\n  const createConnection = (fromId, toId) => {\n    const newConnection = {\n      id: `conn_${Date.now()}`,\n      from: { componentId: fromId, pin: 'out' },\n      to: { componentId: toId, pin: 'in' },\n      type: 'wire',\n      color: '#000000'\n    };\n\n    const updatedConnections = [...connections, newConnection];\n    setConnections(updatedConnections);\n    saveToHistory(components, updatedConnections);\n\n    onCircuitChange({\n      components,\n      connections: updatedConnections\n    });\n  };\n\n  // Handle canvas pan\n  const handleMouseDown = (e) => {\n    if (selectedTool === 'pan' || e.altKey) {\n      setIsDragging(true);\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    if (isDragging && (selectedTool === 'pan' || e.altKey)) {\n      setPanOffset(prev => ({\n        x: prev.x + e.movementX,\n        y: prev.y + e.movementY\n      }));\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // Zoom controls\n  const handleZoomIn = () => setZoom(prev => Math.min(prev * 1.2, 3));\n  const handleZoomOut = () => setZoom(prev => Math.max(prev * 0.8, 0.3));\n  const handleResetView = () => {\n    setZoom(1);\n    setPanOffset({ x: 0, y: 0 });\n  };\n\n  // Component management\n  const handleDeleteComponent = () => {\n    const updatedComponents = components.filter(comp => !selectedComponents.includes(comp.id));\n    const updatedConnections = connections.filter(conn =>\n      !selectedComponents.includes(conn.from.componentId) &&\n      !selectedComponents.includes(conn.to.componentId)\n    );\n\n    setComponents(updatedComponents);\n    setConnections(updatedConnections);\n    setSelectedComponents([]);\n    setSelectedComponent(null);\n    saveToHistory(updatedComponents, updatedConnections);\n\n    onCircuitChange({\n      components: updatedComponents,\n      connections: updatedConnections\n    });\n  };\n\n  const handleCopyComponents = () => {\n    const componentsToCopy = components.filter(comp => selectedComponents.includes(comp.id));\n    setClipboard(componentsToCopy);\n  };\n\n  const handlePasteComponents = () => {\n    if (clipboard.length === 0) return;\n\n    const pastedComponents = clipboard.map(comp => ({\n      ...comp,\n      id: `${comp.id}_copy_${Date.now()}`,\n      x: comp.x + 50,\n      y: comp.y + 50\n    }));\n\n    const updatedComponents = [...components, ...pastedComponents];\n    setComponents(updatedComponents);\n    saveToHistory(updatedComponents, connections);\n\n    onCircuitChange({\n      components: updatedComponents,\n      connections\n    });\n  };\n\n  // Generate code from circuit\n  const handleGenerateCode = () => {\n    if (onCodeGenerate && components.length > 0) {\n      const circuitDescription = generateCircuitDescription();\n      onCodeGenerate(circuitDescription);\n    }\n  };\n\n  const generateCircuitDescription = () => {\n    const board = components.find(comp => comp.type.includes('arduino') || comp.type.includes('esp'));\n    const sensors = components.filter(comp => comp.type.includes('sensor'));\n    const actuators = components.filter(comp => comp.type.includes('led') || comp.type.includes('buzzer'));\n\n    let description = `Create Arduino code for a circuit with:`;\n\n    if (board) {\n      description += `\\n- ${board.name} as the microcontroller`;\n    }\n\n    if (sensors.length > 0) {\n      description += `\\n- Sensors: ${sensors.map(s => s.name).join(', ')}`;\n    }\n\n    if (actuators.length > 0) {\n      description += `\\n- Actuators: ${actuators.map(a => a.name).join(', ')}`;\n    }\n\n    if (connections.length > 0) {\n      description += `\\n- ${connections.length} connections between components`;\n    }\n\n    description += `\\n\\nPlease generate complete Arduino code with proper setup, loop, and pin configurations.`;\n\n    return description;\n  };\n\n  // Export circuit as JSON\n  const handleExportCircuit = () => {\n    const circuitData = {\n      components,\n      connections,\n      metadata: {\n        exportedAt: new Date().toISOString(),\n        version: '1.0',\n        projectName: project?.name || 'Untitled Circuit'\n      }\n    };\n\n    const blob = new Blob([JSON.stringify(circuitData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${project?.name || 'circuit'}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // Import circuit from JSON\n  const handleImportCircuit = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const circuitData = JSON.parse(e.target.result);\n          if (circuitData.components && circuitData.connections) {\n            setComponents(circuitData.components);\n            setConnections(circuitData.connections);\n            saveToHistory(circuitData.components, circuitData.connections);\n\n            onCircuitChange({\n              components: circuitData.components,\n              connections: circuitData.connections\n            });\n          }\n        } catch (error) {\n          console.error('Failed to import circuit:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-white\">\n      {/* Toolbar */}\n      <div className=\"border-b border-gray-200 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Circuit Designer</h3>\n\n            {/* Tool Selection */}\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => setSelectedTool('select')}\n                className={`p-2 rounded ${selectedTool === 'select' ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'}`}\n                title=\"Select Tool\"\n              >\n                <Move className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={() => setSelectedTool('pan')}\n                className={`p-2 rounded ${selectedTool === 'pan' ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'}`}\n                title=\"Pan Tool\"\n              >\n                <Move className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={() => setSelectedTool('connect')}\n                className={`p-2 rounded ${selectedTool === 'connect' ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'}`}\n                title=\"Connect Tool\"\n              >\n                <Link className=\"h-4 w-4\" />\n              </button>\n            </div>\n\n            {/* View Controls */}\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => setShowGrid(!showGrid)}\n                className={`p-2 rounded ${showGrid ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'}`}\n                title=\"Toggle Grid\"\n              >\n                <Grid className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={() => setSnapToGrid(!snapToGrid)}\n                className={`p-2 rounded ${snapToGrid ? 'bg-blue-100 text-blue-600' : 'hover:bg-gray-100'}`}\n                title=\"Toggle Snap to Grid\"\n              >\n                <Settings className=\"h-4 w-4\" />\n              </button>\n            </div>\n\n            {/* Zoom Controls */}\n            <div className=\"flex items-center space-x-2\">\n              <button onClick={handleZoomOut} className=\"p-2 hover:bg-gray-100 rounded\" title=\"Zoom Out\">\n                <ZoomOut className=\"h-4 w-4\" />\n              </button>\n              <span className=\"text-sm text-gray-600 min-w-[60px] text-center\">\n                {Math.round(zoom * 100)}%\n              </span>\n              <button onClick={handleZoomIn} className=\"p-2 hover:bg-gray-100 rounded\" title=\"Zoom In\">\n                <ZoomIn className=\"h-4 w-4\" />\n              </button>\n              <button onClick={handleResetView} className=\"p-2 hover:bg-gray-100 rounded\" title=\"Reset View\">\n                <RotateCcw className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            {/* History Controls */}\n            <button\n              onClick={undo}\n              disabled={historyIndex <= 0}\n              className=\"p-2 hover:bg-gray-100 rounded disabled:opacity-50\"\n              title=\"Undo\"\n            >\n              <Undo className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={redo}\n              disabled={historyIndex >= history.length - 1}\n              className=\"p-2 hover:bg-gray-100 rounded disabled:opacity-50\"\n              title=\"Redo\"\n            >\n              <Redo className=\"h-4 w-4\" />\n            </button>\n\n            {/* Actions */}\n            {selectedComponents.length > 0 && (\n              <>\n                <button\n                  onClick={handleCopyComponents}\n                  className=\"p-2 hover:bg-gray-100 rounded\"\n                  title=\"Copy\"\n                >\n                  <Copy className=\"h-4 w-4\" />\n                </button>\n                <button\n                  onClick={handleDeleteComponent}\n                  className=\"p-2 hover:bg-red-100 text-red-600 rounded\"\n                  title=\"Delete\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                </button>\n              </>\n            )}\n\n            <button\n              onClick={handlePasteComponents}\n              disabled={clipboard.length === 0}\n              className=\"p-2 hover:bg-gray-100 rounded disabled:opacity-50\"\n              title=\"Paste\"\n            >\n              <Square className=\"h-4 w-4\" />\n            </button>\n\n            <button\n              onClick={handleGenerateCode}\n              disabled={components.length === 0}\n              className=\"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:opacity-50\"\n              title=\"Generate Code\"\n            >\n              <Zap className=\"h-4 w-4 inline mr-1\" />\n              Generate Code\n            </button>\n\n            <button\n              onClick={handleExportCircuit}\n              className=\"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded\"\n              title=\"Export Circuit\"\n            >\n              <Download className=\"h-4 w-4 inline mr-1\" />\n              Export\n            </button>\n\n            <label className=\"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded cursor-pointer\">\n              <Upload className=\"h-4 w-4 inline mr-1\" />\n              Import\n              <input\n                type=\"file\"\n                accept=\".json\"\n                onChange={handleImportCircuit}\n                className=\"hidden\"\n              />\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex\">\n        {/* Component Library Sidebar */}\n        <div className=\"w-64 border-r border-gray-200 bg-gray-50 p-4 overflow-y-auto\">\n          <h4 className=\"text-sm font-semibold text-gray-900 mb-4\">Component Library</h4>\n\n          {/* Categories */}\n          <div className=\"space-y-4\">\n            {['board', 'input', 'output'].map(category => (\n              <div key={category}>\n                <h5 className=\"text-xs font-medium text-gray-700 uppercase tracking-wide mb-2\">\n                  {category}\n                </h5>\n                <div className=\"space-y-2\">\n                  {componentLibrary\n                    .filter(comp => comp.category === category)\n                    .map(component => {\n                      const Icon = component.icon;\n                      return (\n                        <div\n                          key={component.id}\n                          draggable\n                          onDragStart={(e) => handleDragStart(e, component)}\n                          className=\"flex items-center space-x-3 p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 hover:shadow-sm cursor-move transition-all\"\n                        >\n                          <div\n                            className=\"p-2 rounded\"\n                            style={{ backgroundColor: component.color + '20' }}\n                          >\n                            <Icon\n                              className=\"h-5 w-5\"\n                              style={{ color: component.color }}\n                            />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-sm font-medium text-gray-900 truncate\">\n                              {component.name}\n                            </p>\n                            <p className=\"text-xs text-gray-500\">\n                              {component.pins} pins\n                            </p>\n                          </div>\n                        </div>\n                      );\n                    })}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Canvas */}\n        <div className=\"flex-1 bg-gray-100 overflow-hidden relative\">\n          <div\n            ref={canvasRef}\n            className=\"w-full h-full cursor-crosshair\"\n            style={{\n              backgroundImage: showGrid ? `\n                radial-gradient(circle, #e5e7eb 1px, transparent 1px),\n                linear-gradient(to right, #f3f4f6 1px, transparent 1px),\n                linear-gradient(to bottom, #f3f4f6 1px, transparent 1px)\n              ` : 'none',\n              backgroundSize: showGrid ? `${GRID_SIZE * zoom}px ${GRID_SIZE * zoom}px` : 'auto',\n              backgroundPosition: `${panOffset.x}px ${panOffset.y}px`\n            }}\n            onDrop={handleDrop}\n            onDragOver={(e) => e.preventDefault()}\n            onMouseDown={handleMouseDown}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onMouseLeave={handleMouseUp}\n            onClick={() => {\n              setSelectedComponents([]);\n              setSelectedComponent(null);\n            }}\n          >\n            {/* Render connections first (behind components) */}\n            {connections.map(connection => {\n              const fromComp = components.find(c => c.id === connection.from.componentId);\n              const toComp = components.find(c => c.id === connection.to.componentId);\n\n              if (!fromComp || !toComp) return null;\n\n              const fromX = fromComp.x + (fromComp.size?.width || 60) / 2;\n              const fromY = fromComp.y + (fromComp.size?.height || 40) / 2;\n              const toX = toComp.x + (toComp.size?.width || 60) / 2;\n              const toY = toComp.y + (toComp.size?.height || 40) / 2;\n\n              return (\n                <svg\n                  key={connection.id}\n                  className=\"absolute inset-0 pointer-events-none\"\n                  style={{ zIndex: 1 }}\n                >\n                  <line\n                    x1={(fromX + panOffset.x) * zoom}\n                    y1={(fromY + panOffset.y) * zoom}\n                    x2={(toX + panOffset.x) * zoom}\n                    y2={(toY + panOffset.y) * zoom}\n                    stroke={connection.color}\n                    strokeWidth=\"2\"\n                    markerEnd=\"url(#arrowhead)\"\n                  />\n                  <defs>\n                    <marker\n                      id=\"arrowhead\"\n                      markerWidth=\"10\"\n                      markerHeight=\"7\"\n                      refX=\"9\"\n                      refY=\"3.5\"\n                      orient=\"auto\"\n                    >\n                      <polygon\n                        points=\"0 0, 10 3.5, 0 7\"\n                        fill={connection.color}\n                      />\n                    </marker>\n                  </defs>\n                </svg>\n              );\n            })}\n\n            {/* Render components */}\n            {components.map(component => {\n              const libraryComponent = componentLibrary.find(c => c.id === component.type);\n              if (!libraryComponent) return null;\n\n              const Icon = libraryComponent.icon;\n              const isSelected = selectedComponents.includes(component.id);\n\n              return (\n                <div\n                  key={component.id}\n                  className={`absolute cursor-move border-2 rounded-lg p-3 bg-white shadow-sm transition-all ${\n                    isSelected\n                      ? 'border-blue-500 bg-blue-50 shadow-lg scale-105'\n                      : 'border-gray-300 hover:border-gray-400 hover:shadow-md'\n                  }`}\n                  style={{\n                    left: (component.x * zoom) + panOffset.x,\n                    top: (component.y * zoom) + panOffset.y,\n                    transform: `scale(${zoom})`,\n                    transformOrigin: 'top left',\n                    minWidth: component.size?.width || 60,\n                    minHeight: component.size?.height || 40\n                  }}\n                  onClick={(e) => handleComponentClick(component.id, e)}\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div\n                      className=\"p-1 rounded\"\n                      style={{ backgroundColor: component.color + '20' }}\n                    >\n                      <Icon\n                        className=\"h-4 w-4\"\n                        style={{ color: component.color }}\n                      />\n                    </div>\n                    {isSelected && (\n                      <div className=\"flex space-x-1\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            // Rotate component\n                            const updatedComponents = components.map(comp =>\n                              comp.id === component.id\n                                ? { ...comp, rotation: (comp.rotation + 90) % 360 }\n                                : comp\n                            );\n                            setComponents(updatedComponents);\n                            saveToHistory(updatedComponents, connections);\n                          }}\n                          className=\"p-1 hover:bg-gray-200 rounded\"\n                        >\n                          <RotateCw className=\"h-3 w-3\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"text-xs text-center text-gray-700 font-medium truncate\">\n                    {component.name}\n                  </div>\n\n                  {/* Connection points */}\n                  <div className=\"absolute -left-1 top-1/2 transform -translate-y-1/2\">\n                    <div\n                      className={`w-3 h-3 rounded-full border-2 cursor-pointer transition-colors ${\n                        isConnecting && connectionStart === component.id\n                          ? 'bg-blue-500 border-blue-600'\n                          : 'bg-white border-gray-400 hover:border-blue-400'\n                      }`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleConnectionClick(component.id);\n                      }}\n                    />\n                  </div>\n                  <div className=\"absolute -right-1 top-1/2 transform -translate-y-1/2\">\n                    <div\n                      className={`w-3 h-3 rounded-full border-2 cursor-pointer transition-colors ${\n                        isConnecting && connectionStart === component.id\n                          ? 'bg-blue-500 border-blue-600'\n                          : 'bg-white border-gray-400 hover:border-blue-400'\n                      }`}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleConnectionClick(component.id);\n                      }}\n                    />\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Canvas overlay for empty state */}\n          {components.length === 0 && (\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <Zap className=\"mx-auto h-16 w-16 text-gray-400 mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                  Start Designing Your Circuit\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Drag components from the sidebar to begin building your circuit\n                </p>\n                <div className=\"text-sm text-gray-500\">\n                  Tip: Use the pan tool to navigate and zoom controls to adjust view\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Connection mode indicator */}\n          {isConnecting && (\n            <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg\">\n              <div className=\"flex items-center space-x-2\">\n                <Link className=\"h-4 w-4\" />\n                <span className=\"text-sm\">Click on another component to create connection</span>\n                <button\n                  onClick={() => {\n                    setIsConnecting(false);\n                    setConnectionStart(null);\n                  }}\n                  className=\"ml-2 hover:bg-blue-700 p-1 rounded\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Properties Panel */}\n        <div className=\"w-80 border-l border-gray-200 bg-gray-50 p-4 overflow-y-auto\">\n          <h4 className=\"text-sm font-semibold text-gray-900 mb-4\">Properties</h4>\n\n          {selectedComponent ? (\n            <div className=\"space-y-4\">\n              {(() => {\n                const component = components.find(c => c.id === selectedComponent);\n                if (!component) return null;\n\n                return (\n                  <div>\n                    <h5 className=\"text-sm font-medium text-gray-900 mb-2\">\n                      {component.name}\n                    </h5>\n\n                    <div className=\"space-y-3\">\n                      <div>\n                        <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                          Position X\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={Math.round(component.x)}\n                          onChange={(e) => {\n                            const updatedComponents = components.map(comp =>\n                              comp.id === component.id\n                                ? { ...comp, x: parseInt(e.target.value) || 0 }\n                                : comp\n                            );\n                            setComponents(updatedComponents);\n                            saveToHistory(updatedComponents, connections);\n                          }}\n                          className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                          Position Y\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={Math.round(component.y)}\n                          onChange={(e) => {\n                            const updatedComponents = components.map(comp =>\n                              comp.id === component.id\n                                ? { ...comp, y: parseInt(e.target.value) || 0 }\n                                : comp\n                            );\n                            setComponents(updatedComponents);\n                            saveToHistory(updatedComponents, connections);\n                          }}\n                          className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                          Rotation\n                        </label>\n                        <input\n                          type=\"number\"\n                          value={component.rotation || 0}\n                          onChange={(e) => {\n                            const updatedComponents = components.map(comp =>\n                              comp.id === component.id\n                                ? { ...comp, rotation: parseInt(e.target.value) || 0 }\n                                : comp\n                            );\n                            setComponents(updatedComponents);\n                            saveToHistory(updatedComponents, connections);\n                          }}\n                          className=\"w-full px-2 py-1 text-sm border border-gray-300 rounded\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                );\n              })()}\n            </div>\n          ) : (\n            <div className=\"text-center text-gray-500\">\n              <Square className=\"mx-auto h-8 w-8 mb-2 opacity-50\" />\n              <p className=\"text-sm\">Select a component to view its properties</p>\n            </div>\n          )}\n\n          {/* Circuit Statistics */}\n          <div className=\"mt-6 pt-4 border-t border-gray-200\">\n            <h5 className=\"text-sm font-medium text-gray-900 mb-2\">Circuit Stats</h5>\n            <div className=\"space-y-1 text-sm text-gray-600\">\n              <div className=\"flex justify-between\">\n                <span>Components:</span>\n                <span className=\"font-medium\">{components.length}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Connections:</span>\n                <span className=\"font-medium\">{connections.length}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span>Zoom:</span>\n                <span className=\"font-medium\">{Math.round(zoom * 100)}%</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CircuitDesigner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}