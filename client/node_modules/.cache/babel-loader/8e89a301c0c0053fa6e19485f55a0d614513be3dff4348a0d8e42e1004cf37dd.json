{"ast":null,"code":"/**\n * API Configuration and Utilities\n * Axios instance with interceptors for authentication and error handling\n */import axios from'axios';// Create axios instance\nconst api=axios.create({baseURL:process.env.REACT_APP_API_URL||'http://localhost:3004/api/v1',timeout:30000,// 30 seconds\nheaders:{'Content-Type':'application/json'}});// Request interceptor for authentication\napi.interceptors.request.use(config=>{var _config$method;// Add auth token if available\nconst token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}// Add request ID for tracking\nconfig.metadata={requestId:Date.now()+Math.random(),startTime:Date.now()};console.log(\"\\uD83D\\uDE80 API Request: \".concat((_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),\" \").concat(config.url),{requestId:config.metadata.requestId,data:config.data});return config;},error=>{console.error('❌ Request Error:',error);return Promise.reject(error);});// Response interceptor for error handling\napi.interceptors.response.use(response=>{const duration=Date.now()-response.config.metadata.startTime;console.log(\"\\u2705 API Response: \".concat(response.status,\" \").concat(response.config.url),{requestId:response.config.metadata.requestId,duration:\"\".concat(duration,\"ms\"),data:response.data});return response;},error=>{var _error$config,_error$config$metadat,_error$config2,_error$config3,_error$config3$method,_error$response,_error$response2,_error$response2$data,_error$config4,_error$config4$metada,_error$response3,_error$response4,_error$response5;const duration=(_error$config=error.config)!==null&&_error$config!==void 0&&(_error$config$metadat=_error$config.metadata)!==null&&_error$config$metadat!==void 0&&_error$config$metadat.startTime?Date.now()-error.config.metadata.startTime:'unknown';console.error('❌ API Error:',{url:(_error$config2=error.config)===null||_error$config2===void 0?void 0:_error$config2.url,method:(_error$config3=error.config)===null||_error$config3===void 0?void 0:(_error$config3$method=_error$config3.method)===null||_error$config3$method===void 0?void 0:_error$config3$method.toUpperCase(),status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,duration:\"\".concat(duration,\"ms\"),message:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||error.message,requestId:(_error$config4=error.config)===null||_error$config4===void 0?void 0:(_error$config4$metada=_error$config4.metadata)===null||_error$config4$metada===void 0?void 0:_error$config4$metada.requestId});// Handle specific error types\nif(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===401){// Token expired - clear local storage\nlocalStorage.removeItem('token');window.location.href='/login';}if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===403){// Forbidden - user doesn't have permission\nconsole.warn('Access forbidden:',error.response.data.error);}if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)>=500){// Server error - could implement retry logic here\nconsole.error('Server error:',error.response.data);}return Promise.reject(error);});// API helper functions\nexport const apiHelpers={// Generic GET request\nget:function(url){let params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return api.get(url,{params});},// Generic POST request\npost:function(url){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return api.post(url,data);},// Generic PUT request\nput:function(url){let data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return api.put(url,data);},// Generic DELETE request\ndelete:url=>api.delete(url),// File upload helper\nuploadFile:function(url,file){let onProgress=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;const formData=new FormData();formData.append('file',file);return api.post(url,formData,{headers:{'Content-Type':'multipart/form-data'},onUploadProgress:onProgress});},// Batch requests helper\nbatch:requests=>{const promises=requests.map(request=>{const{method,url,data,params}=request;return api[method.toLowerCase()](url,method==='GET'?{params}:data);});return Promise.allSettled(promises);}};export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","_config$method","token","localStorage","getItem","Authorization","concat","metadata","requestId","Date","now","Math","random","startTime","console","log","method","toUpperCase","url","data","error","Promise","reject","response","duration","status","_error$config","_error$config$metadat","_error$config2","_error$config3","_error$config3$method","_error$response","_error$response2","_error$response2$data","_error$config4","_error$config4$metada","_error$response3","_error$response4","_error$response5","message","removeItem","window","location","href","warn","apiHelpers","get","params","arguments","length","undefined","post","put","delete","uploadFile","file","onProgress","formData","FormData","append","onUploadProgress","batch","requests","promises","map","toLowerCase","allSettled"],"sources":["/workspace/client/src/utils/api.js"],"sourcesContent":["/**\n * API Configuration and Utilities\n * Axios instance with interceptors for authentication and error handling\n */\n\nimport axios from 'axios';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:3004/api/v1',\n  timeout: 30000, // 30 seconds\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor for authentication\napi.interceptors.request.use(\n  (config) => {\n    // Add auth token if available\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    // Add request ID for tracking\n    config.metadata = {\n      requestId: Date.now() + Math.random(),\n      startTime: Date.now()\n    };\n\n    console.log(`🚀 API Request: ${config.method?.toUpperCase()} ${config.url}`, {\n      requestId: config.metadata.requestId,\n      data: config.data\n    });\n\n    return config;\n  },\n  (error) => {\n    console.error('❌ Request Error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => {\n    const duration = Date.now() - response.config.metadata.startTime;\n\n    console.log(`✅ API Response: ${response.status} ${response.config.url}`, {\n      requestId: response.config.metadata.requestId,\n      duration: `${duration}ms`,\n      data: response.data\n    });\n\n    return response;\n  },\n  (error) => {\n    const duration = error.config?.metadata?.startTime\n      ? Date.now() - error.config.metadata.startTime\n      : 'unknown';\n\n    console.error('❌ API Error:', {\n      url: error.config?.url,\n      method: error.config?.method?.toUpperCase(),\n      status: error.response?.status,\n      duration: `${duration}ms`,\n      message: error.response?.data?.error || error.message,\n      requestId: error.config?.metadata?.requestId\n    });\n\n    // Handle specific error types\n    if (error.response?.status === 401) {\n      // Token expired - clear local storage\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n\n    if (error.response?.status === 403) {\n      // Forbidden - user doesn't have permission\n      console.warn('Access forbidden:', error.response.data.error);\n    }\n\n    if (error.response?.status >= 500) {\n      // Server error - could implement retry logic here\n      console.error('Server error:', error.response.data);\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// API helper functions\nexport const apiHelpers = {\n  // Generic GET request\n  get: (url, params = {}) => api.get(url, { params }),\n\n  // Generic POST request\n  post: (url, data = {}) => api.post(url, data),\n\n  // Generic PUT request\n  put: (url, data = {}) => api.put(url, data),\n\n  // Generic DELETE request\n  delete: (url) => api.delete(url),\n\n  // File upload helper\n  uploadFile: (url, file, onProgress = null) => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return api.post(url, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress: onProgress\n    });\n  },\n\n  // Batch requests helper\n  batch: (requests) => {\n    const promises = requests.map(request => {\n      const { method, url, data, params } = request;\n      return api[method.toLowerCase()](url, method === 'GET' ? { params } : data);\n    });\n\n    return Promise.allSettled(promises);\n  }\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}